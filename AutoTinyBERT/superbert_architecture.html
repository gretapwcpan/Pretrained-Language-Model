<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperBERT Architecture in AutoTinyBERT</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        .architecture-container {
            display: flex;
            gap: 40px;
            margin-bottom: 40px;
        }
        .supernet-section, .subnet-section {
            flex: 1;
        }
        .section-title {
            font-size: 1.5em;
            color: #4a5568;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        svg {
            width: 100%;
            height: auto;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .legend-box {
            width: 30px;
            height: 20px;
            border-radius: 4px;
        }
        .workflow {
            background: #f7fafc;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        .workflow h2 {
            color: #2d3748;
            margin-bottom: 20px;
        }
        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .step {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .step-number {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .step-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        .step-description {
            color: #718096;
            font-size: 0.9em;
        }
        .parameters {
            background: #edf2f7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        .param-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .param-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }
        .param-name {
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 5px;
        }
        .param-range {
            color: #718096;
            font-size: 0.9em;
        }
        .arrow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }
        .arrow {
            font-size: 3em;
            color: #667eea;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .note {
            background: #fef5e7;
            border: 2px solid #f39c12;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        .note-title {
            font-weight: bold;
            color: #e67e22;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SuperBERT Architecture</h1>
        <div class="subtitle">Neural Architecture Search with SuperNet in AutoTinyBERT</div>
        
        <div class="architecture-container">
            <div class="supernet-section">
                <div class="section-title">SuperBERT (SuperNet)</div>
                <svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- Input Layer -->
                    <rect x="50" y="520" width="300" height="60" fill="#e6f3ff" stroke="#4a90e2" stroke-width="2" rx="5"/>
                    <text x="200" y="555" text-anchor="middle" font-size="14" font-weight="bold">Input Embeddings</text>
                    <text x="200" y="570" text-anchor="middle" font-size="11" fill="#666">SuperEmbedding (Variable Size)</text>
                    
                    <!-- Super Transformer Layers -->
                    <g id="super-layers">
                        <!-- Layer 8 (Optional) -->
                        <rect x="50" y="20" width="300" height="50" fill="#fff0f0" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="5,5" rx="5" opacity="0.7"/>
                        <text x="200" y="40" text-anchor="middle" font-size="12">SuperBertLayer 8 (Optional)</text>
                        <text x="200" y="55" text-anchor="middle" font-size="10" fill="#666">Hidden: 128-768 | Heads: 1-12</text>
                        
                        <!-- Layer 7 (Optional) -->
                        <rect x="50" y="80" width="300" height="50" fill="#fff0f0" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="5,5" rx="5" opacity="0.7"/>
                        <text x="200" y="100" text-anchor="middle" font-size="12">SuperBertLayer 7 (Optional)</text>
                        <text x="200" y="115" text-anchor="middle" font-size="10" fill="#666">QKV: 180-768 | FFN: 128-3072</text>
                        
                        <!-- Dots for layers 3-6 -->
                        <text x="200" y="155" text-anchor="middle" font-size="20" fill="#999">â‹®</text>
                        
                        <!-- Layer 2 -->
                        <rect x="50" y="180" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="2" rx="5"/>
                        <text x="200" y="200" text-anchor="middle" font-size="12" font-weight="bold">SuperBertLayer 2</text>
                        <text x="200" y="215" text-anchor="middle" font-size="10" fill="#666">SuperBertAttention + SuperBertIntermediate</text>
                        
                        <!-- Layer 1 -->
                        <rect x="50" y="240" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="2" rx="5"/>
                        <text x="200" y="260" text-anchor="middle" font-size="12" font-weight="bold">SuperBertLayer 1</text>
                        <text x="200" y="275" text-anchor="middle" font-size="10" fill="#666">SuperBertAttention + SuperBertIntermediate</text>
                    </g>
                    
                    <!-- Dynamic Components -->
                    <g id="components">
                        <rect x="70" y="310" width="120" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                        <text x="130" y="330" text-anchor="middle" font-size="11" font-weight="bold">SuperLinear</text>
                        <text x="130" y="343" text-anchor="middle" font-size="9" fill="#666">Variable Dims</text>
                        
                        <rect x="210" y="310" width="120" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                        <text x="270" y="330" text-anchor="middle" font-size="11" font-weight="bold">SuperLayerNorm</text>
                        <text x="270" y="343" text-anchor="middle" font-size="9" fill="#666">Adaptive Norm</text>
                    </g>
                    
                    <!-- Attention Detail -->
                    <g id="attention-detail">
                        <rect x="70" y="370" width="260" height="60" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="5"/>
                        <text x="200" y="390" text-anchor="middle" font-size="12" font-weight="bold">SuperBertSelfAttention</text>
                        <text x="200" y="405" text-anchor="middle" font-size="10" fill="#666">Q, K, V with variable dimensions</text>
                        <text x="200" y="420" text-anchor="middle" font-size="10" fill="#666">Heads: 1-12, QKV Size: 180-768</text>
                    </g>
                    
                    <!-- FFN Detail -->
                    <g id="ffn-detail">
                        <rect x="70" y="450" width="260" height="50" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="5"/>
                        <text x="200" y="470" text-anchor="middle" font-size="12" font-weight="bold">SuperBertIntermediate + Output</text>
                        <text x="200" y="485" text-anchor="middle" font-size="10" fill="#666">FFN Size: 128-3072 (variable)</text>
                    </g>
                    
                    <!-- Arrows -->
                    <path d="M 200 510 L 200 450" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 200 440 L 200 380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 200 360 L 200 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <path d="M 200 290 L 200 250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <polygon points="0 0, 10 5, 0 10" fill="#666"/>
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <div class="arrow-container">
                <div class="arrow">â†’</div>
            </div>
            
            <div class="subnet-section">
                <div class="section-title">Extracted Sub-Model</div>
                <svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- Input Layer -->
                    <rect x="50" y="520" width="300" height="60" fill="#e6f3ff" stroke="#4a90e2" stroke-width="2" rx="5"/>
                    <text x="200" y="555" text-anchor="middle" font-size="14" font-weight="bold">Input Embeddings</text>
                    <text x="200" y="570" text-anchor="middle" font-size="11" fill="#666">Fixed Size: 384</text>
                    
                    <!-- Example Extracted Architecture -->
                    <text x="200" y="50" text-anchor="middle" font-size="14" font-weight="bold" fill="#e11d48">Example: S1 Model (7.2x speedup)</text>
                    
                    <!-- Layer 4 -->
                    <rect x="50" y="80" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="3" rx="5"/>
                    <text x="200" y="100" text-anchor="middle" font-size="12" font-weight="bold">Layer 4</text>
                    <text x="200" y="115" text-anchor="middle" font-size="10" fill="#666">Hidden: 384 | Heads: 6</text>
                    
                    <!-- Layer 3 -->
                    <rect x="50" y="150" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="3" rx="5"/>
                    <text x="200" y="170" text-anchor="middle" font-size="12" font-weight="bold">Layer 3</text>
                    <text x="200" y="185" text-anchor="middle" font-size="10" fill="#666">QKV: 384 | FFN: 1536</text>
                    
                    <!-- Layer 2 -->
                    <rect x="50" y="220" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="3" rx="5"/>
                    <text x="200" y="240" text-anchor="middle" font-size="12" font-weight="bold">Layer 2</text>
                    <text x="200" y="255" text-anchor="middle" font-size="10" fill="#666">Hidden: 384 | Heads: 6</text>
                    
                    <!-- Layer 1 -->
                    <rect x="50" y="290" width="300" height="50" fill="#f0fff0" stroke="#4ade80" stroke-width="3" rx="5"/>
                    <text x="200" y="310" text-anchor="middle" font-size="12" font-weight="bold">Layer 1</text>
                    <text x="200" y="325" text-anchor="middle" font-size="10" fill="#666">QKV: 384 | FFN: 1536</text>
                    
                    <!-- Fixed Components -->
                    <rect x="70" y="370" width="260" height="40" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="5"/>
                    <text x="200" y="390" text-anchor="middle" font-size="12" font-weight="bold">Multi-Head Attention</text>
                    <text x="200" y="403" text-anchor="middle" font-size="10" fill="#666">6 Heads, QKV: 384</text>
                    
                    <rect x="70" y="430" width="260" height="40" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="5"/>
                    <text x="200" y="450" text-anchor="middle" font-size="12" font-weight="bold">Feed-Forward Network</text>
                    <text x="200" y="463" text-anchor="middle" font-size="10" fill="#666">FFN Size: 1536</text>
                    
                    <!-- Performance Stats -->
                    <rect x="50" y="490" width="300" height="20" fill="#fee2e2" stroke="#ef4444" stroke-width="1" rx="3"/>
                    <text x="200" y="503" text-anchor="middle" font-size="11" font-weight="bold" fill="#dc2626">7.2x Speedup | 83.3 SQuAD | 78.3 GLUE</text>
                    
                    <!-- Arrows -->
                    <path d="M 200 510 L 200 490" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 480 L 200 440" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 420 L 200 380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 360 L 200 300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 280 L 200 230" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 210 L 200 160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    <path d="M 200 140 L 200 90" stroke="#666" stroke-width="2" marker-end="url(#arrowhead2)"/>
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead2" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <polygon points="0 0, 10 5, 0 10" fill="#666"/>
                        </marker>
                    </defs>
                </svg>
            </div>
        </div>
        
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: #f0fff0; border: 2px solid #4ade80;"></div>
                <span>Active Layers</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #fff0f0; border: 2px dashed #ff6b6b;"></div>
                <span>Optional Layers (can be skipped)</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #fef3c7; border: 2px solid #f59e0b;"></div>
                <span>Dynamic Components</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: #e0e7ff; border: 2px solid #6366f1;"></div>
                <span>Attention Mechanism</span>
            </div>
        </div>
        
        <!-- Workflow -->
        <div class="workflow">
            <h2>AutoTinyBERT Workflow</h2>
            <div class="workflow-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-title">Train SuperBERT</div>
                    <div class="step-description">Train a single SuperNet containing all possible architectures</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-title">Architecture Search</div>
                    <div class="step-description">Use NAS to find optimal sub-architectures based on latency constraints</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-title">Extract Sub-Model</div>
                    <div class="step-description">Extract the best performing architecture from SuperBERT</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-title">Fine-tune</div>
                    <div class="step-description">Further train the extracted model for optimal performance</div>
                </div>
            </div>
        </div>
        
        <!-- Parameters -->
        <div class="parameters">
            <h2>SuperBERT Search Space</h2>
            <div class="param-grid">
                <div class="param-item">
                    <div class="param-name">Number of Layers</div>
                    <div class="param-range">1 to 8 transformer layers</div>
                </div>
                <div class="param-item">
                    <div class="param-name">Hidden Size</div>
                    <div class="param-range">128 to 768 dimensions</div>
                </div>
                <div class="param-item">
                    <div class="param-name">QKV Size</div>
                    <div class="param-range">180 to 768 dimensions</div>
                </div>
                <div class="param-item">
                    <div class="param-name">FFN Size</div>
                    <div class="param-range">128 to 3072 dimensions</div>
                </div>
                <div class="param-item">
                    <div class="param-name">Attention Heads</div>
                    <div class="param-range">1 to 12 heads</div>
                </div>
                <div class="param-item">
                    <div class="param-name">Embedding Size</div>
                    <div class="param-range">Variable (matches hidden size)</div>
                </div>
            </div>
        </div>
        
        <!-- Note -->
        <div class="note">
            <div class="note-title">ðŸ’¡ Key Insight: Why "SuperBERT"?</div>
            <div>The "Super" prefix indicates this is a <strong>SuperNet</strong> - a single network that contains all possible sub-networks. Instead of training multiple models separately, AutoTinyBERT trains one SuperBERT that can be dynamically configured to different architectures. This makes the architecture search process much more efficient, achieving models that are 6-27x faster than BERT-base while maintaining good performance.</div>
        </div>
    </div>
</body>
</html>
